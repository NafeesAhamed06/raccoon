<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- <meta name="viewport" content="width=device-width, initial-scale=1.0" /> -->
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />

    <link rel="shortcut icon" href="/img/Logo3.webp" type="image/x-icon" />
    <title>Raccoon App - Video Chat</title>
    <link rel="stylesheet" href="/css/modal.css?v=0.01.1" />
    <link rel="stylesheet" href="/css/style2.css?v=1.022.6" />
    <!-- <link rel="stylesheet" href="/css/tst.css" /> -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.0.4/socket.io.js"></script>
    <link
      href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap"
      rel="stylesheet"
    />
  </head>
  <script>
    let myData;
    let myName;
    let myMail;
    let mySUB;
    let DBpfp;
    let myGender;
    let myCountry;
    let myAge;

    function setViewportHeight() {
      let vh = window.innerHeight * 0.01;
      document.documentElement.style.setProperty("--vh", `${vh}px`);
    }

    window.addEventListener("resize", setViewportHeight);
    window.addEventListener("load", setViewportHeight);

    myGender = "<%= user.gender%>";
    myCountry = "<%= user.country %>";
    myAge = "<%= user.age %>";
    DBpfp = "<%= user.pfp %>";

    if ("<%=user.name%>") {
      myName = "<%=user.name%>";
      myMail = "<%=user.email%>";
    }

    if ("<%=user.sub%>" == "free") {
      mySUB = "<%= user.sub %>";
      myData = "<%= user.freeLimit %>";
    }
  </script>
  <body>
    <main class="video_chat_main_container">
      <div class="video_chat_container">
        <div class="video-tag-container">
          <canvas
            id="canvas"
            style="display: none"
            width="640"
            height="360"
          ></canvas>

          <div class="videos">
            <video
              class="video-player"
              id="user-2"
              autoplay="autoplay"
              playsinnline="playsinnline"
            ></video>
            <video
              muted
              class="video-player"
              id="user-1"
              autoplay="autoplay"
              playsinnline="playsinnline"
            ></video>
            <div class="mighty-hldr-LH">
              <div class="loader" style="display: none"></div>
              <p
                style="
                  display: flex;
                  gap: 4px;
                  text-align: center;
                  font-family: 'Montserrat';
                  font-weight: 800;
                  font-size: large;
                  letter-spacing: 1px;
                  line-height: 30px;
                  color: red;
                "
                id="connectionStatus"
              >
                You Are Not Connected
              </p>
              <div class="dtl-hldr">
                <div id="remote-dtl" class="remote-dtl" style="display: none">
                  <img
                    alt="profile"
                    id="profileImage-R"
                    src="/img/human.webp"
                    style="display: none"
                  />
                  <p
                    style="
                      color: rgb(255, 255, 255);
                      font-weight: 700;
                      display: none;
                    "
                    id="R-name"
                  >
                    You Are Remote
                  </p>
                </div>
              </div>
              <div class="btnss-hlder" style="height: 95%; width: 95%">
                <div class="rep-chat" data-modal-target="#modal">
                  <div
                    style="
                      display: flex;
                      align-items: center;
                      flex-direction: column;
                    "
                  >
                    <img width="60px" src="/img/racoonpolice1.webp" />
                  </div>
                </div>
                <div id="gamePopup" class="flued-chat">
                  <button class="close-button flued-close">&times;</button>
                  <div class="game-cont">
                    <img
                      src="/img/game/textLogo.webp"
                      class="game-text-logo"
                      alt=""
                    />

                    <div id="game"></div>

                    <div class="scoreboard">
                      <table>
                        <thead>
                          <tr>
                            <th></th>
                            <th>Score</th>
                            <!-- <th>Strikes</th> -->
                          </tr>
                        </thead>
                        <tbody>
                          <tr>
                            <td>YOU</td>
                            <td id="player1Score">0</td>
                            <!-- <td id="player1Strikes">0</td> -->
                          </tr>
                          <tr>
                            <td>OPPONENT</td>
                            <td id="player2Score">0</td>
                            <!-- <td id="player2Strikes">0</td> -->
                          </tr>
                        </tbody>
                      </table>
                    </div>
                  </div>
                </div>

                <% if (user.sub === "pro") { %>
                <div class="game-chat" id="startGameBtn">
                  <div
                    style="
                      display: flex;
                      align-items: center;
                      flex-direction: column;
                    "
                  >
                    <img width="60px" src="/img/game/imgLogo1.webp" />
                  </div>
                </div>
                <% } %>
              </div>
            </div>
          </div>
          <div class="mighty-hldr-RH">
            <div class="btnss-hlder" style="align-items: flex-start">
              <div id="local-dtl" class="local-dtl">
                <div class="Mighty-button-holder">
                  <div class="button-holder">
                    <button
                      class="icon-btn stop-chat"
                      onclick="window.location.href = '/'"
                    >
                      <img src="/img/logout1.webp" />
                    </button>
                    <button class="icon-btn next-chat">
                      <img src="/img/next1.webp" />
                    </button>
                  </div>
                  <div class="button-holder">
                    <button class="icon-btn" data-modal-target="#filter-model">
                      <img src="/img/earth1.webp" />
                    </button>
                    <button class="icon-btn" data-modal-target="#filter-model">
                      <img src="/img/couple1.webp" />
                    </button>
                  </div>
                </div>
                <div class="filter-carousel">
                  <div class="filter-padding"></div>
                  <!-- No Filter Option -->
                  <div
                    class="filter-thumb active no-filter-thumb"
                    data-filter=""
                  >
                    âœ–
                  </div>

                  <% if (user.sub === "free") { %>
                  <div class="filter-thumb" data-filter="43281170875">
                    <img
                      src="https://lens-storage.storage.googleapis.com/png/32829a9df880419f8d82193aedaf5855"
                      alt="Face Disort"
                    />
                  </div>
                  <% } else { %>
                  <div
                    class="filter-thumb"
                    data-filter="85de94ef-7c22-4ce0-a5a4-364d44ac6b77"
                  >
                    <img
                      src="https://lens-storage.storage.googleapis.com/png/df07da8983cb4d2e8a512c26d422fa00"
                      alt="Funny Face 1"
                    />
                  </div>
                  <div
                    class="filter-thumb"
                    data-filter="21d3db51-a589-4df1-8dc3-a627c75fe84f"
                  >
                    <img
                      src="https://lens-storage.storage.googleapis.com/png/edc90136289245818f998a6b402447e9"
                      alt="Cat Face"
                    />
                  </div>
                  <div class="filter-thumb" data-filter="43309500875">
                    <img
                      src="https://lens-storage.storage.googleapis.com/png/89d920a37102495fbadf3fef61ab3678"
                      alt="Pink Glass"
                    />
                  </div>
                  <div class="filter-thumb" data-filter="43281170875">
                    <img
                      src="https://lens-storage.storage.googleapis.com/png/32829a9df880419f8d82193aedaf5855"
                      alt="Face Disort"
                    />
                  </div>
                  <div class="filter-thumb" data-filter="43296870875">
                    <img
                      src="https://lens-storage.storage.googleapis.com/png/fb819fd9c2d14a6a890af459da5fd5d5"
                      alt="Background 1"
                    />
                  </div>
                  <div class="filter-thumb" data-filter="43294710875">
                    <img
                      src="https://lens-storage.storage.googleapis.com/png/81535a9f705341f5aa2702aecbcf8d97"
                      alt="Background 2"
                    />
                  </div>
                  <div class="filter-thumb" data-filter="43300180875">
                    <img
                      src="https://lens-storage.storage.googleapis.com/png/665f7eb1621b4203b492c820c107ca9e"
                      alt="Background 3-Hearts"
                    />
                  </div>
                  <div class="filter-thumb" data-filter="49414230875">
                    <img
                      src="https://lens-storage.storage.googleapis.com/png/e36d9958ae594c578b5a321edb376712"
                      alt="Glass 2"
                    />
                  </div>
                  <!-- 43296900875 Body Filter -->
                  <!-- 43301890875 Hand Filter -->
                  <% } %>
                  <div class="filter-padding"></div>
                </div>
              </div>
              <div style="display: none" class="chat-container">
                <div class="chat-text-container">
                  <p class="chat-text-area" id="chat-text-area"></p>
                </div>

                <div class="next-chat-container">
                  <input name="" id="msg-input" cols="25" rows="5" />

                  <div class="msg-send-button">
                    <i class="material-icons" style="font-size: 36px">send</i>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div id="connectedText" style="display: none">
          <!-- Goes to Line 189 -->
          <p
            style="color: rgb(255, 255, 255); font-weight: 700; display: none"
            id="myname"
          >
            You Are Name
          </p>
          <!-- Goes to Line 189 -->
          <p>You are now chatting with a random stranger</p>
          <p>You both speak the same language</p>
        </div>
        <hr class="horizontal-divider" style="display: none" />
      </div>
    </main>
    <div class="modal" id="modal">
      <div class="modal-header">
        <div class="title">REPORT</div>
        <button data-close-button class="close-button">&times;</button>
      </div>
      <div class="modal-body">
        <select id="reportReason">
          <option disabled selected value="">-- Select a reason --</option>
          <option value="Inappropriate Content">Inappropriate Content</option>
          <option value="Harassment or Abuse">Harassment or Abuse</option>
          <option value="Spam">Spam</option>
          <option value="Fake Identity">Fake Identity</option>
          <option value="Hate Speech">Hate Speech</option>
          <option value="Sexual Content">Sexual Content</option>
          <option value="Violence or Threats">Violence or Threats</option>
          <option value="Other">Other</option>
        </select>

        <button id="submitReportBtn" data-close-button>Submit Report</button>
      </div>
    </div>
    <div class="modal" id="country-modal" style="z-index: 99999; height: 90vh">
      <div class="modal-header">
        <div class="title">SELECT COUNTRY</div>
        <button data-close-button class="close-button">&times;</button>
      </div>
      <div
        class="modal-body"
        style="height: 95%; flex-direction: column; gap: 10px"
      >
        <div style="display: flex; justify-content: center; flex-wrap: wrap">
          <input
            id="country-search"
            type="text"
            placeholder="Search country..."
          />
          <button id="search-btn">Search</button>
        </div>

        <div id="countryList" style="overflow: auto; height: 100%"></div>
      </div>
    </div>
    <div class="modal" id="filter-model">
      <div class="modal-header">
        <div class="title">Filter UsersðŸ‘‘</div>
        <button data-close-button class="close-button">&times;</button>
      </div>
      <div class="modal-body filt-model">
        <label for="country">Country:</label>

        <button
          data-modal-target="#country-modal"
          class="fil-but"
          id="fil-count"
        >
          Select Country
        </button>

        <label for="gender">Gender:</label>
        <select class="fil-sel" name="gender" id="gender">
          <option value="">-- Select Gender --</option>
          <option value="Male">Male</option>
          <option value="Female">Female</option>
        </select>

        <% if(user.sub === "pro") {%>
        <button class="fil-but" id="RemoveFilter" onclick="brr()">
          Remove Filters
        </button>
        <% }%> <% if(user.sub === "pro") {%>
        <button class="fil-but" id="SubmitFilter">FindðŸ‘‘</button>
        <% } else if(user.sub === "free"){%> <% if(user.isGuest){ %>
        <button class="fil-but" disabled>You are Guest</button>
        <% } else {%>
        <button class="fil-but" onclick="window.location.href='/?plans=true'">
          UpgradeðŸ‘‘
        </button>
        <% } %> <% } %>
      </div>
    </div>
    <div id="overlay"></div>
  </body>
  <script
    src="https://code.jquery.com/jquery-3.6.4.min.js"
    integrity="sha256-oP6HI9z1XaZNBrJURtCoUT5SUnxFr8s3BzRl+cbzUq8="
    crossorigin="anonymous"
  ></script>
  <script src="/js/index.js?v=1.0.173"></script>
  <script defer src="/js/modal.js"></script>
  <script src="/js/snap-camera.iife.js"></script>
  <script>
    let snapCamera;

    const countries = [
      "Afghanistan",
      "Albania",
      "Algeria",
      "Andorra",
      "Angola",
      "Antigua and Barbuda",
      "Argentina",
      "Armenia",
      "Australia",
      "Austria",
      "Azerbaijan",
      "Bahamas",
      "Bahrain",
      "Bangladesh",
      "Barbados",
      "Belarus",
      "Belgium",
      "Belize",
      "Benin",
      "Bhutan",
      "Bolivia",
      "Bosnia and Herzegovina",
      "Botswana",
      "Brazil",
      "Brunei",
      "Bulgaria",
      "Burkina Faso",
      "Burundi",
      "Cabo Verde",
      "Cambodia",
      "Cameroon",
      "Canada",
      "Central African Republic",
      "Chad",
      "Chile",
      "China",
      "Colombia",
      "Comoros",
      "Congo (Congo-Brazzaville)",
      "Costa Rica",
      "Croatia",
      "Cuba",
      "Cyprus",
      "Czechia (Czech Republic)",
      "Democratic Republic of the Congo",
      "Denmark",
      "Djibouti",
      "Dominica",
      "Dominican Republic",
      "Ecuador",
      "Egypt",
      "El Salvador",
      "Equatorial Guinea",
      "Eritrea",
      "Estonia",
      'Eswatini (fmr. "Swaziland")',
      "Ethiopia",
      "Fiji",
      "Finland",
      "France",
      "Gabon",
      "Gambia",
      "Georgia",
      "Germany",
      "Ghana",
      "Greece",
      "Grenada",
      "Guatemala",
      "Guinea",
      "Guinea-Bissau",
      "Guyana",
      "Haiti",
      "Holy See",
      "Honduras",
      "Hungary",
      "Iceland",
      "India",
      "Indonesia",
      "Iran",
      "Iraq",
      "Ireland",
      "Israel",
      "Italy",
      "Jamaica",
      "Japan",
      "Jordan",
      "Kazakhstan",
      "Kenya",
      "Kiribati",
      "Kuwait",
      "Kyrgyzstan",
      "Laos",
      "Latvia",
      "Lebanon",
      "Lesotho",
      "Liberia",
      "Libya",
      "Liechtenstein",
      "Lithuania",
      "Luxembourg",
      "Madagascar",
      "Malawi",
      "Malaysia",
      "Maldives",
      "Mali",
      "Malta",
      "Marshall Islands",
      "Mauritania",
      "Mauritius",
      "Mexico",
      "Micronesia",
      "Moldova",
      "Monaco",
      "Mongolia",
      "Montenegro",
      "Morocco",
      "Mozambique",
      "Myanmar (Burma)",
      "Namibia",
      "Nauru",
      "Nepal",
      "Netherlands",
      "New Zealand",
      "Nicaragua",
      "Niger",
      "Nigeria",
      "North Korea",
      "North Macedonia",
      "Norway",
      "Oman",
      "Pakistan",
      "Palau",
      "Palestine State",
      "Panama",
      "Papua New Guinea",
      "Paraguay",
      "Peru",
      "Philippines",
      "Poland",
      "Portugal",
      "Qatar",
      "Romania",
      "Russia",
      "Rwanda",
      "Saint Kitts and Nevis",
      "Saint Lucia",
      "Saint Vincent and the Grenadines",
      "Samoa",
      "San Marino",
      "Sao Tome and Principe",
      "Saudi Arabia",
      "Senegal",
      "Serbia",
      "Seychelles",
      "Sierra Leone",
      "Singapore",
      "Slovakia",
      "Slovenia",
      "Solomon Islands",
      "Somalia",
      "South Africa",
      "South Korea",
      "South Sudan",
      "Spain",
      "Sri Lanka",
      "Sudan",
      "Suriname",
      "Sweden",
      "Switzerland",
      "Syria",
      "Tajikistan",
      "Tanzania",
      "Thailand",
      "Timor-Leste",
      "Togo",
      "Tonga",
      "Trinidad and Tobago",
      "Tunisia",
      "Turkey",
      "Turkmenistan",
      "Tuvalu",
      "Uganda",
      "Ukraine",
      "United Arab Emirates",
      "United Kingdom",
      "United States of America",
      "Uruguay",
      "Uzbekistan",
      "Vanuatu",
      "Venezuela",
      "Vietnam",
      "Yemen",
      "Zambia",
      "Zimbabwe",
    ];

    const countryCodeMap = {
      Afghanistan: "AF",
      Albania: "AL",
      Algeria: "DZ",
      Andorra: "AD",
      Angola: "AO",
      "Antigua and Barbuda": "AG",
      Argentina: "AR",
      Armenia: "AM",
      Australia: "AU",
      Austria: "AT",
      Azerbaijan: "AZ",
      Bahamas: "BS",
      Bahrain: "BH",
      Bangladesh: "BD",
      Barbados: "BB",
      Belarus: "BY",
      Belgium: "BE",
      Belize: "BZ",
      Benin: "BJ",
      Bhutan: "BT",
      Bolivia: "BO",
      "Bosnia and Herzegovina": "BA",
      Botswana: "BW",
      Brazil: "BR",
      Brunei: "BN",
      Bulgaria: "BG",
      "Burkina Faso": "BF",
      Burundi: "BI",
      "Cabo Verde": "CV",
      Cambodia: "KH",
      Cameroon: "CM",
      Canada: "CA",
      "Central African Republic": "CF",
      Chad: "TD",
      Chile: "CL",
      China: "CN",
      Colombia: "CO",
      Comoros: "KM",
      "Congo (Congo-Brazzaville)": "CG",
      "Costa Rica": "CR",
      Croatia: "HR",
      Cuba: "CU",
      Cyprus: "CY",
      "Czechia (Czech Republic)": "CZ",
      "Democratic Republic of the Congo": "CD",
      Denmark: "DK",
      Djibouti: "DJ",
      Dominica: "DM",
      "Dominican Republic": "DO",
      Ecuador: "EC",
      Egypt: "EG",
      "El Salvador": "SV",
      "Equatorial Guinea": "GQ",
      Eritrea: "ER",
      Estonia: "EE",
      'Eswatini (fmr. "Swaziland")': "SZ",
      Ethiopia: "ET",
      Fiji: "FJ",
      Finland: "FI",
      France: "FR",
      Gabon: "GA",
      Gambia: "GM",
      Georgia: "GE",
      Germany: "DE",
      Ghana: "GH",
      Greece: "GR",
      Grenada: "GD",
      Guatemala: "GT",
      Guinea: "GN",
      "Guinea-Bissau": "GW",
      Guyana: "GY",
      Haiti: "HT",
      "Holy See": "VA",
      Honduras: "HN",
      Hungary: "HU",
      Iceland: "IS",
      India: "IN",
      Indonesia: "ID",
      Iran: "IR",
      Iraq: "IQ",
      Ireland: "IE",
      Israel: "IL",
      Italy: "IT",
      Jamaica: "JM",
      Japan: "JP",
      Jordan: "JO",
      Kazakhstan: "KZ",
      Kenya: "KE",
      Kiribati: "KI",
      Kuwait: "KW",
      Kyrgyzstan: "KG",
      Laos: "LA",
      Latvia: "LV",
      Lebanon: "LB",
      Lesotho: "LS",
      Liberia: "LR",
      Libya: "LY",
      Liechtenstein: "LI",
      Lithuania: "LT",
      Luxembourg: "LU",
      Madagascar: "MG",
      Malawi: "MW",
      Malaysia: "MY",
      Maldives: "MV",
      Mali: "ML",
      Malta: "MT",
      "Marshall Islands": "MH",
      Mauritania: "MR",
      Mauritius: "MU",
      Mexico: "MX",
      Micronesia: "FM",
      Moldova: "MD",
      Monaco: "MC",
      Mongolia: "MN",
      Montenegro: "ME",
      Morocco: "MA",
      Mozambique: "MZ",
      "Myanmar (Burma)": "MM",
      Namibia: "NA",
      Nauru: "NR",
      Nepal: "NP",
      Netherlands: "NL",
      "New Zealand": "NZ",
      Nicaragua: "NI",
      Niger: "NE",
      Nigeria: "NG",
      "North Korea": "KP",
      "North Macedonia": "MK",
      Norway: "NO",
      Oman: "OM",
      Pakistan: "PK",
      Palau: "PW",
      "Palestine State": "PS",
      Panama: "PA",
      "Papua New Guinea": "PG",
      Paraguay: "PY",
      Peru: "PE",
      Philippines: "PH",
      Poland: "PL",
      Portugal: "PT",
      Qatar: "QA",
      Romania: "RO",
      Russia: "RU",
      Rwanda: "RW",
      "Saint Kitts and Nevis": "KN",
      "Saint Lucia": "LC",
      "Saint Vincent and the Grenadines": "VC",
      Samoa: "WS",
      "San Marino": "SM",
      "Sao Tome and Principe": "ST",
      "Saudi Arabia": "SA",
      Senegal: "SN",
      Serbia: "RS",
      Seychelles: "SC",
      "Sierra Leone": "SL",
      Singapore: "SG",
      Slovakia: "SK",
      Slovenia: "SI",
      "Solomon Islands": "SB",
      Somalia: "SO",
      "South Africa": "ZA",
      "South Korea": "KR",
      "South Sudan": "SS",
      Spain: "ES",
      "Sri Lanka": "LK",
      Sudan: "SD",
      Suriname: "SR",
      Sweden: "SE",
      Switzerland: "CH",
      Syria: "SY",
      Tajikistan: "TJ",
      Tanzania: "TZ",
      Thailand: "TH",
      "Timor-Leste": "TL",
      Togo: "TG",
      Tonga: "TO",
      "Trinidad and Tobago": "TT",
      Tunisia: "TN",
      Turkey: "TR",
      Turkmenistan: "TM",
      Tuvalu: "TV",
      Uganda: "UG",
      Ukraine: "UA",
      "United Arab Emirates": "AE",
      "United Kingdom": "GB",
      "United States of America": "US",
      Uruguay: "UY",
      Uzbekistan: "UZ",
      Vanuatu: "VU",
      Venezuela: "VE",
      Vietnam: "VN",
      Yemen: "YE",
      Zambia: "ZM",
      Zimbabwe: "ZW",
    };

    const countryList = document.getElementById("countryList");
    const countrySearch = document.getElementById("country-search");
    const searchBtn = document.getElementById("search-btn");

    let selectedCountry = null;
    if (localStorage.getItem("countryFilter")) {
      selectedCountry = localStorage.getItem("countryFilter");
      document.getElementById("fil-count").innerText = selectedCountry;
    }

    const renderCountryList = (filter = "") => {
      countryList.innerHTML = "";
      const sortedCountries = countries.filter((country) =>
        country.toLowerCase().includes(filter.toLowerCase())
      );
      // Move selected country to the top if it exists in the filtered list
      if (selectedCountry && sortedCountries.includes(selectedCountry)) {
        sortedCountries.splice(sortedCountries.indexOf(selectedCountry), 1);
        sortedCountries.unshift(selectedCountry);
      }
      sortedCountries.forEach((country) => {
        const countryCode = countryCodeMap[country];
        const countryDiv = document.createElement("div");
        countryDiv.className =
          "country-option" +
          (country === selectedCountry ? " Selected-country" : "");
        countryDiv.dataset.country = country;
        countryDiv.innerHTML = `${country} <img src="https://flagcdn.com/24x18/${countryCode.toLowerCase()}.webp" alt="${country} flag">`;
        countryDiv.addEventListener("click", () => {
          // Remove 'Selected-country' class from all elements
          document
            .querySelectorAll(".country-option")
            .forEach((el) => el.classList.remove("Selected-country"));
          // Add 'Selected-country' class to the clicked element
          countryDiv.classList.add("Selected-country");
          // Move the selected element to the top
          countryList.prepend(countryDiv);
          selectedCountry = country;
          document.getElementById("fil-count").innerText = selectedCountry;
        });
        countryList.appendChild(countryDiv);
      });
    };

    renderCountryList();

    searchBtn.addEventListener("click", () => {
      renderCountryList(countrySearch.value);
    });

    countrySearch.addEventListener("input", () => {
      renderCountryList(countrySearch.value);
    });
    initSnapCamera({
      apiToken:
        "eyJhbGciOiJIUzI1NiIsImtpZCI6IkNhbnZhc1MyU0hNQUNQcm9kIiwidHlwIjoiSldUIn0.eyJhdWQiOiJjYW52YXMtY2FudmFzYXBpIiwiaXNzIjoiY2FudmFzLXMyc3Rva2VuIiwibmJmIjoxNzU0Mzc5ODAwLCJzdWIiOiI4YTM5MjY4NC02YjQyLTQ3ODctYWVjMS1jOGY2Yzc2YzVmYzF-U1RBR0lOR343MGE4Y2JkNC1hMGQxLTRhZjEtOTFhMC0zNTY0YzJiYjczOWQifQ.Qg5PTPicbPA75jhmurkLAyeysgrbcFyjfBbLohmwzF8",
      lensId: "",
      lensGroupId: "ecee53bc-3061-4d46-9679-c800d3111a81",
      videoElement: document.getElementById("canvas"),
    }).then((sc) => {
      snapCamera = sc;
      console.log("Snap Camera initialized successfully", snapCamera);
      // document.getElementById("filterSelect").style.display =
      //   "block";
    });

    document.getElementById("SubmitFilter").addEventListener("click", () => {
      const gen = document.getElementById("gender").value;
      const con = document.querySelector(".Selected-country").dataset.country;

      console.log(con);
      console.log(gen);

      localStorage.setItem("genderFilter", gen);
      localStorage.setItem("countryFilter", con);

      window.location.reload();
    });
  </script>
</html>

<style>
  @media (min-width: 768px) {
    #country-modal {
      width: 60vw;
    }
    .country-option {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      font-size: 12px;
      font-weight: 600;
      text-align: center;
    }
    .Selected-country {
      background-color: #ddd;
      font-weight: bold;
    }
    #countryList {
      overflow: auto;
      height: 100%;
      display: grid;
      grid-template-columns: repeat(auto-fill, 120px);
      grid-auto-rows: 120px;
      gap: 5px;
      justify-content: center;
    }
  }
  .game-text-logo {
    width: 40vh;
  }
  .game-over-holder {
    text-transform: uppercase;
    font-weight: 900;
    display: flex;
    gap: 10px;
    align-items: center;
    justify-content: center;
    flex-direction: column;
  }
  .flued-close-2 {
    margin: 10px;
    cursor: pointer;
    padding: 5px;
    border-radius: 9px;
    border: 0;
    font-weight: 900;
    background: #ffffff;
    color: #020e4d;
    font-size: 16px;
  }
  .flued-close {
    position: absolute;
    top: 3%;
    left: 3%;
    cursor: pointer;
    border: none;
    outline: none;
    background: none;
    font-size: 2rem;
    font-weight: bold;
    color: white;
  }
  .scoreboard {
    display: flex;
    justify-content: center;
    /* margin-top: 20px; */
  }

  .scoreboard table {
    font-weight: 700;
    border-collapse: collapse;
    background: rgba(255, 255, 255, 0.1);
    color: white;
    font-size: 15px;
    text-align: center;
    min-width: 250px;
  }

  .scoreboard th,
  .scoreboard td {
    border: 1px solid rgba(255, 255, 255, 0.2);
    padding: 10px 20px;
  }

  .scoreboard th {
    background: rgba(255, 255, 255, 0.2);
    font-weight: bold;
  }
  .game-cont {
    display: flex;
    flex-direction: column;
    align-items: center;
    margin-top: 20px;
    justify-content: center;
    gap: 10px;
    width: 35vw;
  }
  @media (max-width: 768px) {
    .game-cont {
      width: 40vw;
    }
  }
  @media (max-width: 420px) {
    #game{
      width: 95%;
    }
    #gamePopup {
      width: 60%;
      right: 0;
      left: unset;
      height: 50vh;
      padding: 10px;
    }
    .game-cont {
      display: flex;
      flex-direction: column;
      overflow: auto;
      height: 100%;
      width: 100%;
      align-items: center;
      margin-top: 20px;
      justify-content: flex-start;
      gap: 10px;
    }
    .game-text-logo {
      width: 25vh;
    }
    #game h2 {
      font-size: 15px;
    }
    .scoreboard table {
      max-width: 80%;
      min-width: 80%;
      font-size: 12px;
    }
  }
  #country-search {
    padding: 10px;
    width: 70%;
    border: 1px solid #ccc;
    border-radius: 5px 0 0 5px;
    font-size: 16px;
    outline: none;
  }

  #search-btn {
    padding: 10px 15px;
    border: 1px solid #ccc;
    border-left: none;
    background-color: #673ab7;
    color: white;
    border-radius: 0 5px 5px 0;
    cursor: pointer;
    font-size: 16px;
  }

  #search-btn:hover {
    background-color: #3c285f;
  }

  #country-search:focus {
    border-color: #673ab7;
    box-shadow: 0 0 0 1px rgba(76, 175, 80, 0.4);
  }
  .country-option {
    margin-bottom: 10px;
    cursor: pointer;
    padding: 10px;
    background: #673ab7;
    border-radius: 10px;
  }
  .Selected-country {
    background-color: #ddd;
    font-weight: bold;
  }
  /* Spinner style */
  .spinner {
    width: 50px;
    height: 50px;
    border: 6px solid #f3f3f3;
    border-top: 6px solid #ff69b4; /* Pink color */
    border-radius: 50%;
    animation: spin 1s linear infinite;
  }

  /* Spinner animation */
  @keyframes spin {
    0% {
      transform: rotate(0deg);
    }
    100% {
      transform: rotate(360deg);
    }
  }
  .filter-carousel {
    touch-action: pan-x;
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    padding: 10px 0;
    display: flex;
    overflow-x: auto;
    background: rgba(0, 0, 0, 0.5);
    border-radius: 10px;
    gap: 10px;
    z-index: 9999;
    scroll-snap-type: x mandatory;
    -webkit-overflow-scrolling: touch;

    /* Hide scrollbars */
    scrollbar-width: none; /* Firefox */
  }
  .filter-carousel::-webkit-scrollbar {
    display: none; /* Chrome/Safari */
  }

  .filter-thumb {
    flex: 0 0 auto;
    width: 50px;
    height: 50px;
    border-radius: 50%;
    overflow: hidden;
    border: 2px solid transparent;
    transition: all 0.2s ease;
    cursor: pointer;
    scroll-snap-align: center;
    -webkit-tap-highlight-color: transparent;
  }

  .filter-thumb.active {
    border: 2px solid #ffffff;
    box-shadow: 0 0 12px 4px rgba(255, 255, 255, 0.8);
    transform: scale(1.1);
  }

  /* No-filter placeholder (optional visual cue) */
  .filter-thumb.no-filter-thumb {
    background: rgba(255, 255, 255, 0.2);
  }

  /* Add virtual padding elements */
  .filter-padding {
    flex: 0 0 50vw;
    height: 1px;
    pointer-events: none;
  }

  .filter-thumb.no-filter-thumb {
    background: rgba(255, 255, 255, 0.3);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 10px;
    color: #fff;
  }

  .filter-thumb img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  #local-dtl {
    width: 100%;
    height: 100%;
    justify-content: center;
  }
  .Mighty-button-holder {
    position: absolute;
    display: flex;
    gap: 5px;
    justify-content: center;
    width: 100vw;
    right: 0;
    bottom: 12%;
  }
  .button-holder {
    /* position: relative; */
    /* top: 34%; */
    display: flex;
    align-items: center;
    gap: 10px;
    background-color: #1e1e1e;
    padding: 5px 10px;
    border-radius: 30px;
    box-shadow: 0 0 10px #b476ff74, 0 0 20px #b476ff74, inset 0 0 6px #00000066;
  }
  @media (min-width: 768px) {
    .filter-carousel {
      width: 100vw;
      left: unset;
      justify-content: center;
    }
  }
  @media (max-width: 768px) {
    .Mighty-button-holder {
      bottom: 25%;
    }
  }
  @media (max-width: 420px) {
    .Mighty-button-holder {
      bottom: 23%;
      padding: 0px 20px;
      justify-content: flex-start;
    }
  }
  .icon-btn {
    width: 40px;
    height: 40px;
    background: none;
    border: none;
    font-size: 28px; /* emoji size */
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  .icon-btn img {
    border: 0;
    border-radius: 0;
    width: 22px;
    height: 22px;
  }
  .icon-btn:hover {
    background-color: rgba(255, 255, 255, 0.1);
    border-radius: 50%;
    transition: 0.3s ease-in;
  }

  #reportReason {
    padding: 8px;
    font-size: 14px;
    margin-right: 10px;
    outline: none;
    border-radius: 10px;
    border: 2px solid;
  }

  #submitReportBtn {
    padding: 8px 12px;
    color: white;
    border: none;
    cursor: pointer;
    border-radius: 4px;
    background-color: #8a5ce7;
  }

  .modal-header {
    border-bottom: 1px solid white;
  }
  .modal-body {
    display: flex;
    justify-content: center;
  }

  /* Select Dropdowns */
  .fil-sel {
    width: 100%;
    padding: 8px 12px;
    margin-bottom: 12px;
    border-radius: 8px;
    border: 1px solid rgba(255, 255, 255, 0.2);
    background: rgba(20, 20, 35, 0.85); /* dark glass effect */
    color: white;
    font-size: 14px;
    outline: none;
    backdrop-filter: blur(6px);
    transition: 0.3s;
  }

  .fil-sel:hover,
  .fil-sel:focus {
    border-color: #ff00c8;
    box-shadow: 0 0 8px rgba(255, 0, 200, 0.5);
  }

  /* Buttons */
  .fil-but {
    width: 100%;
    padding: 8px 12px;
    margin-bottom: 10px;
    border-radius: 8px;
    border: none;
    background: linear-gradient(90deg, #ff00c8, #6200ff);
    color: white;
    font-weight: bold;
    cursor: pointer;
    transition: 0.3s;
  }

  .fil-but:disabled{
    background: #6200ff;
    pointer-events: none;
  }
  .fil-but:hover:enabled {
    background: linear-gradient(90deg, #6200ff, #ff00c8);
    box-shadow: 0 0 12px rgba(255, 0, 200, 0.5);
  }

  #reportReason {
    padding: 8px;
    font-size: 14px;
    margin-right: 10px;
    outline: none;
    border-radius: 10px;
    border: 2px solid;
  }

  #submitReportBtn {
    padding: 8px 12px;
    color: white;
    border: none;
    cursor: pointer;
    border-radius: 4px;
    background-color: #8a5ce7;
  }
  .modal-header {
    border-bottom: 1px solid white;
  }
  .modal-body {
    display: flex;
    justify-content: center;
  }
  .close-button {
    color: white;
  }
  .filt-model {
    display: flex;
    justify-content: center;
    flex-direction: column;
    gap: 10px;
    align-items: center;
  }
  * {
    font-family: "Montserrat";
  }
  /* #submitFilter {
    padding: 5px;
    width: 30%;
  } */
</style>
